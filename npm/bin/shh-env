#!/usr/bin/env node
const { spawnSync } = require("child_process");
const { existsSync } = require("fs");
const path = require("path");

const ext = process.platform === "win32" ? ".exe" : "";
const bin = path.join(__dirname, "native", `shh-env${ext}`);

(async () => {
  if (!existsSync(bin)) {
    await require("../install.js");
  }
  const result = spawnSync(bin, process.argv.slice(2), { stdio: "inherit" });
  process.exit(result.status ?? 1);
})();
